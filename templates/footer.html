<div id="footer1">Copyright © <span id="copyrightYear"></span> <a href="{{ blogBase['homeUrl'] }}">{{ blogBase['title'] }}</a></div>
<div id="footer2">
    {%- if blogBase['filingNum']!='' -%}
    <span id="filingNum"><a href="https://beian.miit.gov.cn/" target="_blank">{{ blogBase['filingNum'] }}</a> • </span>
    {%- endif %}
    <span id="runday"></span>
    <span id="busuanzi_container_site_pv" style="display:none;">总访问量 <span id="busuanzi_value_site_pv"></span> 次 • </span>
    <span id="busuanzi_container_site_uv" style="display:none;">总访客数 <span id="busuanzi_value_site_uv"></span> 人 • </span>
    <span style="cursor:pointer;" onclick="toggleWriteBox()" title="Write Post">✍️</span>
</div>

<!-- 隐藏的发布小窗 -->
<div id="writeBox" style="display:none; position:fixed; bottom:70px; right:20px; width:300px; background:var(--color-canvas-default); border:1px solid var(--color-border-default); border-radius:10px; padding:15px; box-shadow:0 8px 24px rgba(0,0,0,0.2); z-index:1000;">
    <input id="issueTitle" type="text" placeholder="文章标题" style="width:100%; margin-bottom:10px; padding:5px; border:1px solid var(--color-border-default); border-radius:5px; background:transparent; color:inherit;">
    <textarea id="issueBody" placeholder="文章内容 (支持 Markdown)" style="width:100%; height:100px; margin-bottom:10px; padding:5px; border:1px solid var(--color-border-default); border-radius:5px; background:transparent; color:inherit;"></textarea>
    <button onclick="submitToGithub()" style="width:100%; padding:8px; background:#2ea44f; color:white; border:none; border-radius:5px; cursor:pointer; font-weight:bold;">去 GitHub 发布</button>
</div>

<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

<script>
var now=new Date();
document.getElementById("copyrightYear").innerHTML=now.getFullYear();

if("{{ blogBase['startSite'] }}"!=""){
    var startSite=new Date("{{ blogBase['startSite'] }}");
    var diff=now.getTime()-startSite.getTime();
    var diffDay=Math.floor(diff/(1000*60*60*24));
    document.getElementById("runday").innerHTML="{{ i18n['run'] }}"+diffDay+"{{ i18n['days'] }}"+" • ";
}

function toggleWriteBox() {
    var box = document.getElementById("writeBox");
    box.style.display = (box.style.display === "none") ? "block" : "none";
}

function submitToGithub() {
    var title = encodeURIComponent(document.getElementById("issueTitle").value);
    var body = encodeURIComponent(document.getElementById("issueBody").value);
    if(!title) { alert("请输入标题"); return; }
    var url = "https://github.com/YU-1021/YU-1021.github.io/issues/new?title=" + title + "&body=" + body;
    window.open(url, "_blank");
}
</script>
